"use strict";jQuery(function(y){var _=[];y(".player-name").click(function(){console.log("clicked");var s=y("#sports-bench-player-id").text();console.log(s);var e,a=y(this).parent("tr"),o=y(this).parents("table"),n=y(this).text().split("|"),t=n[0].trim(),l=n[1].trim().toLocaleLowerCase().replace(/\s+/g,"-"),r=_.length;if(y(o).hasClass("baseball"))if(e=y(o).hasClass("batting")?"batting":"pitching",0<r){var c=!1;for(i=0;i<r;i++)_[i][0]==t&&_[i][1]==l&&_[i][2]==e&&(c=!0,f=i);1==c?(y(".season-"+t).map(function(){y(this).hide(500,function(){y(this).html("")})}),_.splice(f,1)):(w="undefined"!=s&&s!=sbloadseasons.player?s:sbloadseasons.player,d={action:"sports_bench_load_seasons",nonce:sbloadseasons.nonce,season:t,team:l,stat_group:e,player:w},y.post(sbloadseasons.url,d,function(s){s.success&&(a.after(s.data),jQuery(".new-stats-row").hide(0).show(1e3))}).fail(function(s,e,a){}),_.push(u=[t,l,e]))}else{w="undefined"!=s&&s!=sbloadseasons.player?s:sbloadseasons.player;var d={action:"sports_bench_load_seasons",nonce:sbloadseasons.nonce,season:t,team:l,stat_group:e,player:w};y.post(sbloadseasons.url,d,function(s){s.success&&(a.after(s.data),jQuery(".new-stats-row").hide(0).show(1e3))}).fail(function(s,e,a){});var u=[t,l,e];_.push(u)}else if(y(o).hasClass("hockey"))if(e=y(o).hasClass("normal")?"normal":"goalie",0<r){for(var c=!1,p=0;p<r;p++)_[p][0]==t&&_[p][1]==l&&_[p][2]==e&&(c=!0,f=p);1==c?(a.nextAll(".new-stats-row").hide(500,function(){a.nextAll(".new-stats-row").html("")}),_.splice(f,1)):(w="undefined"!=s&&s!=sbloadseasons.player?s:sbloadseasons.player,d={action:"sports_bench_load_seasons",nonce:sbloadseasons.nonce,season:t,team:l,stat_group:e,player:w},y.post(sbloadseasons.url,d,function(s){s.success&&(a.after(s.data),jQuery(".new-stats-row").hide(0).show(1e3))}).fail(function(s,e,a){}),_.push(u=[t,l,e]))}else{w="undefined"!=s&&s!=sbloadseasons.player?s:sbloadseasons.player;d={action:"sports_bench_load_seasons",nonce:sbloadseasons.nonce,season:t,team:l,stat_group:e,player:w};y.post(sbloadseasons.url,d,function(s){s.success&&(a.after(s.data),jQuery(".new-stats-row").hide(0).show(1e3))}).fail(function(s,e,a){});u=[t,l,e];_.push(u)}else if(y(o).hasClass("football"))if(e=y(o).hasClass("passing")?"passing":y(o).hasClass("rushing")?"rushing":y(o).hasClass("receiving")?"receiving":y(o).hasClass("defense")?"defense":y(o).hasClass("kicking")?"kicking":"returns",0<r){for(var c=!1,h=0;h<r;h++)_[h][0]==t&&_[h][1]==l&&_[h][2]==e&&(c=!0,f=h);1==c?(a.nextAll(".new-stats-row").hide(500,function(){a.nextAll(".new-stats-row").html("")}),_.splice(f,1)):(w="undefined"!=s&&s!=sbloadseasons.player?s:sbloadseasons.player,d={action:"sports_bench_load_seasons",nonce:sbloadseasons.nonce,season:t,team:l,stat_group:e,player:w},y.post(sbloadseasons.url,d,function(s){s.success&&(a.after(s.data),jQuery(".new-stats-row").hide(0).show(1e3))}).fail(function(s,e,a){}),_.push(u=[t,l,e]))}else{w="undefined"!=s&&s!=sbloadseasons.player?s:sbloadseasons.player;d={action:"sports_bench_load_seasons",nonce:sbloadseasons.nonce,season:t,team:l,stat_group:e,player:w};y.post(sbloadseasons.url,d,function(s){s.success&&(a.after(s.data),jQuery(".new-stats-row").hide(0).show(1e3))}).fail(function(s,e,a){});u=[t,l,e];_.push(u)}else if(0<r){for(var f,c=!1,b=0;b<r;b++)_[b][0]==t&&_[b][1]==l&&(c=!0,f=b);1==c?(a.nextAll(".new-stats-row").hide(500,function(){a.nextAll(".new-stats-row").html("")}),_.splice(f,1)):(w=""!=s&&s!=sbloadseasons.player?s:sbloadseasons.player,d={action:"sports_bench_load_seasons",nonce:sbloadseasons.nonce,season:t,team:l,player:w},y.post(sbloadseasons.url,d,function(s){s.success&&(console.log(s),a.after(s.data),jQuery(".new-stats-row").hide(0).show(1e3))}).fail(function(s,e,a){}),_.push(u=[t,l]))}else{var w;w=""!=s&&s!=sbloadseasons.player?s:sbloadseasons.player;d={action:"sports_bench_load_seasons",nonce:sbloadseasons.nonce,season:t,team:l,player:w};y.post(sbloadseasons.url,d,function(s){s.success&&(console.log(s),a.after(s.data),jQuery(".new-stats-row").hide(0).show(1e3))}).fail(function(s,e,a){});u=[t,l];_.push(u)}})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvYWQtc2Vhc29ucy5qcyJdLCJuYW1lcyI6WyJqUXVlcnkiLCIkIiwib3BlblNlYXNvbnMiLCJjbGljayIsImNvbnNvbGUiLCJsb2ciLCJwbGF5ZXJfaWQiLCJ0ZXh0Iiwicm93IiwiaW5mbyIsInRoaXMiLCJwYXJlbnQiLCJzZWFzb24iLCJ0cmltIiwicGFyZW50cyIsImxlbmd0aCIsInNwbGl0IiwicGFyZW50VGFibGUiLCJoYXNDbGFzcyIsInRvTG9jYWxlTG93ZXJDYXNlIiwicmVwbGFjZSIsInN0YXRHcm91cCIsImluZCIsImZvdW5kIiwiaSIsImxlbiIsInRlYW0iLCJtYXAiLCJzcGxpY2UiLCJoaWRlIiwiaHRtbCIsInBsYXllciIsInNibG9hZHNlYXNvbnMiLCJhY3Rpb24iLCJub25jZSIsImRhdGEiLCJzdWNjZXNzIiwicG9zdCIsInNob3ciLCJyZXMiLCJhZnRlciIsInhociIsInRleHRTdGF0dXMiLCJmYWlsIiwiZSIsImNsaWNrZWQiLCJzdGF0X2dyb3VwIiwicHVzaCIsIm5leHRBbGwiLCJsb2FkaW5nIiwidXJsIl0sIm1hcHBpbmdzIjoiYUFBQUEsT0FBUSxTQUFVQyxHQUFsQkQsSUFBUUUsRUFBYyxHQUlmRCxFQUFBLGdCQUFpQkUsTUFBTyxXQUM3QkMsUUFBQUEsSUFBUUMsV0FHUkQsSUFBUUMsRUFBSUMsRUFBWiwyQkFBQUMsT0FFTUgsUUFBSUksSUFBTVAsR0FHTlEsSUFvT2lCSCxFQXBPYkUsRUFBTVAsRUFBRlMsTUFBREMsT0FBdUIsTUFDOUJDLEVBQW1CQyxFQUFWSCxNQUFiSSxRQUFBLFNBRU9MLEVBQUdQLEVBQUFBLE1BQVlhLE9BQXRCQyxNQUFBLEtBRklKLEVBQVNILEVBQU0sR0FBSUksT0FJZkksRUFBQUEsRUFBY0MsR0FBQUEsT0FBVUMsb0JBQWVDLFFBQUEsT0FBQSxLQUVuQ0gsRUFBQUEsRUFBY0MsT0FBdEIsR0FFT2pCLEVBQUFnQixHQUFBQyxTQUFBLFlBUUMsR0FUQUcsRUFHUHBCLEVBQUFnQixHQUFBQyxTQUFB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QUQsT0FHSEksRUFBQSxDQUNFRixPQUFBLDRCQUNVRCxNQUFBQSxjQUFiRSxNQUNIdEIsT0FBQUEsRUE3Qk9jLEtBQU1BLEVBOEJISyxPQUFBQSxHQUVBQyxFQUFBQSxLQUFBQSxjQUZBa0IsSUFBQWYsRUFBQSxTQUFBSSxHQUFBQSxFQUFBSCxVQUlQVixRQUFJckIsSUFKR2tDLEdBS0NSLEVBQUFBLE1BQUFBLEVBQUFBLE1BTFovQixPQUFBLGtCQUFBNkIsS0FBQSxHQUFBUyxLQUFBLFFBU0dDLEtBQWIsU0FBQUUsRUFBQUMsRUFBQUUsTUFLb0IxQyxFQUFnQndDLEtBRHJCRyxFQUFBLENBQUFqQyxFQUFBYyxTQVFSLENBQ0osSUF4QmVLLEVBTElBLEVBdld4QixJQUFBekIsR0FKSkEsR0FBQTBCLGNBQUFELE9BMldxQ3pCLEVBS0owQixjQUFjRCxPQUUzQkksRUFBTyxDQUNQRixPQUFRLDRCQUNSQyxNQUFPRixjQUFjRSxNQUNyQnRCLE9BQVFBLEVBQ1JjLEtBQU1BLEVBQ05LLE9BQVFBLEdBRVo5QixFQUFFb0MsS0FBTUwsY0FBY2tCLElBQUtmLEVBQU0sU0FBV0ksR0FDbkNBLEVBQUlILFVBQ3ZCaEMsUUFBUUMsSUFBS2tDLEdBQ0svQixFQUFJZ0MsTUFBT0QsRUFBSUosTUFDZm5DLE9BQVEsa0JBQW1CNkIsS0FBTSxHQUFJUyxLQUFNLFFBRy9DSyxLQUFNLFNBQVdGLEVBQUtDLEVBQVlFLE1BSWxDQyxFQUFVLENBQUVqQyxFQUFRYyxHQUN4QnhCLEVBQVk2QyxLQUFNRiIsImZpbGUiOiJsb2FkLXNlYXNvbnMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsialF1ZXJ5KCBmdW5jdGlvbiggJCApIHtcblxuICAgIGxldCBvcGVuU2Vhc29ucyA9IFtdO1xuICAgIFxuICAgICQoICcucGxheWVyLW5hbWUnICkuY2xpY2soIGZ1bmN0aW9uKCkge1xuXHRcdGNvbnNvbGUubG9nKCdjbGlja2VkJyk7XG5cbiAgICAgICAgdmFyIHBsYXllcl9pZCA9ICQoICcjc3BvcnRzLWJlbmNoLXBsYXllci1pZCcgKS50ZXh0KCk7XG5cdFx0Y29uc29sZS5sb2cocGxheWVyX2lkKTtcblxuICAgICAgICB2YXIgcm93ID0gJCggdGhpcyApLnBhcmVudCggJ3RyJyApO1xuICAgICAgICB2YXIgcGFyZW50VGFibGUgPSAkKCB0aGlzICkucGFyZW50cyggJ3RhYmxlJyApO1xuXG4gICAgICAgIHZhciBpbmZvID0gJCggdGhpcyApLnRleHQoKS5zcGxpdChcInxcIik7XG4gICAgICAgIHZhciBzZWFzb24gPSBpbmZvWyAwIF0udHJpbSgpO1xuICAgICAgICB2YXIgdGVhbSA9IGluZm9bIDEgXS50cmltKCkudG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKCAvXFxzKy9nLCAnLScgKTtcbiAgICAgICAgdmFyIGxlbiA9IG9wZW5TZWFzb25zLmxlbmd0aDtcblxuICAgICAgICBpZiAoICQoIHBhcmVudFRhYmxlICkuaGFzQ2xhc3MoICdiYXNlYmFsbCcgKSApIHtcblxuICAgICAgICAgICAgaWYgKCAkKCBwYXJlbnRUYWJsZSApLmhhc0NsYXNzKCAnYmF0dGluZycgKSApIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RhdEdyb3VwID0gJ2JhdHRpbmcnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RhdEdyb3VwID0gJ3BpdGNoaW5nJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCBsZW4gPiAwICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBvcGVuU2Vhc29uc1sgaSBdWyAwIF0gPT0gc2Vhc29uICYmIG9wZW5TZWFzb25zWyBpIF1bIDEgXSA9PSB0ZWFtICYmIG9wZW5TZWFzb25zWyBpIF1bIDIgXSA9PSBzdGF0R3JvdXAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kID0gaTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICggZm91bmQgPT0gdHJ1ZSApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wZW5TZWFzb24gPSAnLnNlYXNvbi0nICsgc2Vhc29uO1xuICAgICAgICAgICAgICAgICAgICAkKCBvcGVuU2Vhc29uICkubWFwKCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCB0aGlzICkuaGlkZSggNTAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCggdGhpcyApLmh0bWwoJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkgO1xuICAgICAgICAgICAgICAgICAgICB9IClcbiAgICAgICAgICAgICAgICAgICAgb3BlblNlYXNvbnMuc3BsaWNlKCBpbmQsIDEgKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBwbGF5ZXJfaWQgIT0gJ3VuZGVmaW5lZCcgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBsYXllcl9pZCAhPSBzYmxvYWRzZWFzb25zLnBsYXllciApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxheWVyID0gcGxheWVyX2lkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxheWVyID0gc2Jsb2Fkc2Vhc29ucy5wbGF5ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxheWVyID0gc2Jsb2Fkc2Vhc29ucy5wbGF5ZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdzcG9ydHNfYmVuY2hfbG9hZF9zZWFzb25zJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vbmNlOiBzYmxvYWRzZWFzb25zLm5vbmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vhc29uOiBzZWFzb24sXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZWFtOiB0ZWFtLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdF9ncm91cDogc3RhdEdyb3VwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyOiBwbGF5ZXJcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgJC5wb3N0KCBzYmxvYWRzZWFzb25zLnVybCwgZGF0YSwgZnVuY3Rpb24gKCByZXMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHJlcy5zdWNjZXNzICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5hZnRlciggcmVzLmRhdGEgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoICcubmV3LXN0YXRzLXJvdycgKS5oaWRlKCAwICkuc2hvdyggMTAwMCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSApLmZhaWwoIGZ1bmN0aW9uICggeGhyLCB0ZXh0U3RhdHVzLCBlICkge1xuXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY2xpY2tlZCA9IFsgc2Vhc29uLCB0ZWFtLCBzdGF0R3JvdXAgXTtcbiAgICAgICAgICAgICAgICAgICAgb3BlblNlYXNvbnMucHVzaCggY2xpY2tlZCApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBsb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIHBsYXllcl9pZCAhPSAndW5kZWZpbmVkJyApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBwbGF5ZXJfaWQgIT0gc2Jsb2Fkc2Vhc29ucy5wbGF5ZXIgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxheWVyID0gcGxheWVyX2lkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXllciA9IHNibG9hZHNlYXNvbnMucGxheWVyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXllciA9IHNibG9hZHNlYXNvbnMucGxheWVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnc3BvcnRzX2JlbmNoX2xvYWRfc2Vhc29ucycsXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiBzYmxvYWRzZWFzb25zLm5vbmNlLFxuICAgICAgICAgICAgICAgICAgICBzZWFzb246IHNlYXNvbixcbiAgICAgICAgICAgICAgICAgICAgdGVhbTogdGVhbSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdF9ncm91cDogc3RhdEdyb3VwLFxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXI6IHBsYXllclxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgJC5wb3N0KCBzYmxvYWRzZWFzb25zLnVybCwgZGF0YSwgZnVuY3Rpb24gKCByZXMgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggcmVzLnN1Y2Nlc3MgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuYWZ0ZXIoIHJlcy5kYXRhICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoICcubmV3LXN0YXRzLXJvdycgKS5oaWRlKCAwICkuc2hvdyggMTAwMCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApLmZhaWwoIGZ1bmN0aW9uICggeGhyLCB0ZXh0U3RhdHVzLCBlICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICB2YXIgY2xpY2tlZCA9IFsgc2Vhc29uLCB0ZWFtLCBzdGF0R3JvdXAgXTtcbiAgICAgICAgICAgICAgICBvcGVuU2Vhc29ucy5wdXNoKCBjbGlja2VkICk7XG5cbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH0gZWxzZSBpZiAoICQoIHBhcmVudFRhYmxlICkuaGFzQ2xhc3MoICdob2NrZXknICkgKSB7XG5cbiAgICAgICAgICAgIGlmICggJCggcGFyZW50VGFibGUgKS5oYXNDbGFzcyggJ25vcm1hbCcgKSApIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RhdEdyb3VwID0gJ25vcm1hbCc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBzdGF0R3JvdXAgPSAnZ29hbGllJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCBsZW4gPiAwICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggb3BlblNlYXNvbnNbIGkgXVsgMCBdID09IHNlYXNvbiAmJiBvcGVuU2Vhc29uc1sgaSBdWyAxIF0gPT0gdGVhbSAmJiBvcGVuU2Vhc29uc1sgaSBdWyAyIF0gPT0gc3RhdEdyb3VwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZCA9IGk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIGZvdW5kID09IHRydWUgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5uZXh0QWxsKCAnLm5ldy1zdGF0cy1yb3cnICkuaGlkZSggNTAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cubmV4dEFsbCggJy5uZXctc3RhdHMtcm93JyApLmh0bWwoICcnICk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBvcGVuU2Vhc29ucy5zcGxpY2UoIGluZCwgMSApO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBwbGF5ZXJfaWQgIT0gJ3VuZGVmaW5lZCcgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBsYXllcl9pZCAhPSBzYmxvYWRzZWFzb25zLnBsYXllciApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxheWVyID0gcGxheWVyX2lkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxheWVyID0gc2Jsb2Fkc2Vhc29ucy5wbGF5ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxheWVyID0gc2Jsb2Fkc2Vhc29ucy5wbGF5ZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IGxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3Nwb3J0c19iZW5jaF9sb2FkX3NlYXNvbnMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9uY2U6IHNibG9hZHNlYXNvbnMubm9uY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWFzb246IHNlYXNvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlYW06IHRlYW0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0X2dyb3VwOiBzdGF0R3JvdXAsXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXI6IHBsYXllclxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAkLnBvc3QoIHNibG9hZHNlYXNvbnMudXJsLCBkYXRhLCBmdW5jdGlvbiAoIHJlcyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcmVzLnN1Y2Nlc3MgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LmFmdGVyKCByZXMuZGF0YSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSggJy5uZXctc3RhdHMtcm93JyApLmhpZGUoIDAgKS5zaG93KCAxMDAwICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9ICkuZmFpbCggZnVuY3Rpb24gKCB4aHIsIHRleHRTdGF0dXMsIGUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjbGlja2VkID0gWyBzZWFzb24sIHRlYW0sIHN0YXRHcm91cCBdO1xuICAgICAgICAgICAgICAgICAgICBvcGVuU2Vhc29ucy5wdXNoKCBjbGlja2VkICk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICggcGxheWVyX2lkICE9ICd1bmRlZmluZWQnICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHBsYXllcl9pZCAhPSBzYmxvYWRzZWFzb25zLnBsYXllciApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbGF5ZXIgPSBwbGF5ZXJfaWQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxheWVyID0gc2Jsb2Fkc2Vhc29ucy5wbGF5ZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGxheWVyID0gc2Jsb2Fkc2Vhc29ucy5wbGF5ZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdzcG9ydHNfYmVuY2hfbG9hZF9zZWFzb25zJyxcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IHNibG9hZHNlYXNvbnMubm9uY2UsXG4gICAgICAgICAgICAgICAgICAgIHNlYXNvbjogc2Vhc29uLFxuICAgICAgICAgICAgICAgICAgICB0ZWFtOiB0ZWFtLFxuICAgICAgICAgICAgICAgICAgICBzdGF0X2dyb3VwOiBzdGF0R3JvdXAsXG4gICAgICAgICAgICAgICAgICAgIHBsYXllcjogcGxheWVyXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAkLnBvc3QoIHNibG9hZHNlYXNvbnMudXJsLCBkYXRhLCBmdW5jdGlvbiAoIHJlcyApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCByZXMuc3VjY2VzcyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5hZnRlciggcmVzLmRhdGEgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSggJy5uZXctc3RhdHMtcm93JyApLmhpZGUoIDAgKS5zaG93KCAxMDAwICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICkuZmFpbCggZnVuY3Rpb24gKCB4aHIsIHRleHRTdGF0dXMsIGUgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIHZhciBjbGlja2VkID0gWyBzZWFzb24sIHRlYW0sIHN0YXRHcm91cCBdO1xuICAgICAgICAgICAgICAgIG9wZW5TZWFzb25zLnB1c2goIGNsaWNrZWQgKTtcblxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfSBlbHNlIGlmICggJCggcGFyZW50VGFibGUgKS5oYXNDbGFzcyggJ2Zvb3RiYWxsJyApICkge1xuXG4gICAgICAgICAgICBpZiAoICQoIHBhcmVudFRhYmxlICkuaGFzQ2xhc3MoICdwYXNzaW5nJyApICkge1xuICAgICAgICAgICAgICAgIHZhciBzdGF0R3JvdXAgPSAncGFzc2luZyc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCAkKCBwYXJlbnRUYWJsZSApLmhhc0NsYXNzKCAncnVzaGluZycgKSApIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RhdEdyb3VwID0gJ3J1c2hpbmcnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICggJCggcGFyZW50VGFibGUgKS5oYXNDbGFzcyggJ3JlY2VpdmluZycgKSApIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RhdEdyb3VwID0gJ3JlY2VpdmluZyc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCAkKCBwYXJlbnRUYWJsZSApLmhhc0NsYXNzKCAnZGVmZW5zZScgKSApIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RhdEdyb3VwID0gJ2RlZmVuc2UnO1xuICAgICAgICAgICAgfWVsc2UgaWYgKCAkKCBwYXJlbnRUYWJsZSApLmhhc0NsYXNzKCAna2lja2luZycgKSApIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RhdEdyb3VwID0gJ2tpY2tpbmcnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RhdEdyb3VwID0gJ3JldHVybnMnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIGxlbiA+IDAgKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIG9wZW5TZWFzb25zWyBpIF1bIDAgXSA9PSBzZWFzb24gJiYgb3BlblNlYXNvbnNbIGkgXVsgMSBdID09IHRlYW0gJiYgb3BlblNlYXNvbnNbIGkgXVsgMiBdID09IHN0YXRHcm91cCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmQgPSBpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93Lm5leHRBbGwoICcubmV3LXN0YXRzLXJvdycgKS5oaWRlKCA1MDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5uZXh0QWxsKCAnLm5ldy1zdGF0cy1yb3cnICkuaHRtbCggJycgKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5TZWFzb25zLnNwbGljZSggaW5kLCAxICk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHBsYXllcl9pZCAhPSAndW5kZWZpbmVkJyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcGxheWVyX2lkICE9IHNibG9hZHNlYXNvbnMucGxheWVyICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbGF5ZXIgPSBwbGF5ZXJfaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbGF5ZXIgPSBzYmxvYWRzZWFzb25zLnBsYXllcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbGF5ZXIgPSBzYmxvYWRzZWFzb25zLnBsYXllcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgbG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnc3BvcnRzX2JlbmNoX2xvYWRfc2Vhc29ucycsXG4gICAgICAgICAgICAgICAgICAgICAgICBub25jZTogc2Jsb2Fkc2Vhc29ucy5ub25jZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXNvbjogc2Vhc29uLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVhbTogdGVhbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRfZ3JvdXA6IHN0YXRHcm91cCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcjogcGxheWVyXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICQucG9zdCggc2Jsb2Fkc2Vhc29ucy51cmwsIGRhdGEsIGZ1bmN0aW9uICggcmVzICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCByZXMuc3VjY2VzcyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3cuYWZ0ZXIoIHJlcy5kYXRhICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCAnLm5ldy1zdGF0cy1yb3cnICkuaGlkZSggMCApLnNob3coIDEwMDAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gKS5mYWlsKCBmdW5jdGlvbiAoIHhociwgdGV4dFN0YXR1cywgZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsaWNrZWQgPSBbIHNlYXNvbiwgdGVhbSwgc3RhdEdyb3VwIF07XG4gICAgICAgICAgICAgICAgICAgIG9wZW5TZWFzb25zLnB1c2goIGNsaWNrZWQgKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgbG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCBwbGF5ZXJfaWQgIT0gJ3VuZGVmaW5lZCcgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggcGxheWVyX2lkICE9IHNibG9hZHNlYXNvbnMucGxheWVyICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXllciA9IHBsYXllcl9pZDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbGF5ZXIgPSBzYmxvYWRzZWFzb25zLnBsYXllcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwbGF5ZXIgPSBzYmxvYWRzZWFzb25zLnBsYXllcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3Nwb3J0c19iZW5jaF9sb2FkX3NlYXNvbnMnLFxuICAgICAgICAgICAgICAgICAgICBub25jZTogc2Jsb2Fkc2Vhc29ucy5ub25jZSxcbiAgICAgICAgICAgICAgICAgICAgc2Vhc29uOiBzZWFzb24sXG4gICAgICAgICAgICAgICAgICAgIHRlYW06IHRlYW0sXG4gICAgICAgICAgICAgICAgICAgIHN0YXRfZ3JvdXA6IHN0YXRHcm91cCxcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyOiBwbGF5ZXJcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICQucG9zdCggc2Jsb2Fkc2Vhc29ucy51cmwsIGRhdGEsIGZ1bmN0aW9uICggcmVzICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHJlcy5zdWNjZXNzICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93LmFmdGVyKCByZXMuZGF0YSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCAnLm5ldy1zdGF0cy1yb3cnICkuaGlkZSggMCApLnNob3coIDEwMDAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKS5mYWlsKCBmdW5jdGlvbiAoIHhociwgdGV4dFN0YXR1cywgZSApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgdmFyIGNsaWNrZWQgPSBbIHNlYXNvbiwgdGVhbSwgc3RhdEdyb3VwIF07XG4gICAgICAgICAgICAgICAgb3BlblNlYXNvbnMucHVzaCggY2xpY2tlZCApO1xuXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGxlbiA+IDApIHtcblxuICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZW5TZWFzb25zWyBpIF1bIDAgXSA9PSBzZWFzb24gJiYgb3BlblNlYXNvbnNbIGkgXVsgMSBdID09IHRlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmQgPSBpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCBmb3VuZCA9PSB0cnVlICkge1xuICAgICAgICAgICAgICAgICAgICByb3cubmV4dEFsbCggJy5uZXctc3RhdHMtcm93JyApLmhpZGUoIDUwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93Lm5leHRBbGwoICcubmV3LXN0YXRzLXJvdycgKS5odG1sKCAnJyApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgb3BlblNlYXNvbnMuc3BsaWNlKCBpbmQsIDEgKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggcGxheWVyX2lkICE9ICcnICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwbGF5ZXJfaWQgIT0gc2Jsb2Fkc2Vhc29ucy5wbGF5ZXIgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXllciA9IHBsYXllcl9pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXllciA9IHNibG9hZHNlYXNvbnMucGxheWVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXllciA9IHNibG9hZHNlYXNvbnMucGxheWVyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBsb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdzcG9ydHNfYmVuY2hfbG9hZF9zZWFzb25zJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vbmNlOiBzYmxvYWRzZWFzb25zLm5vbmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vhc29uOiBzZWFzb24sXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZWFtOiB0ZWFtLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyOiBwbGF5ZXJcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgJC5wb3N0KCBzYmxvYWRzZWFzb25zLnVybCwgZGF0YSwgZnVuY3Rpb24gKCByZXMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHJlcy5zdWNjZXNzICkge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyggcmVzICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LmFmdGVyKCByZXMuZGF0YSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSggJy5uZXctc3RhdHMtcm93JyApLmhpZGUoIDAgKS5zaG93KCAxMDAwICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9ICkuZmFpbCggZnVuY3Rpb24gKCB4aHIsIHRleHRTdGF0dXMsIGUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjbGlja2VkID0gWyBzZWFzb24sIHRlYW0gXTtcbiAgICAgICAgICAgICAgICAgICAgb3BlblNlYXNvbnMucHVzaCggY2xpY2tlZCApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBsb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIHBsYXllcl9pZCAhPSAnJyApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBwbGF5ZXJfaWQgIT0gc2Jsb2Fkc2Vhc29ucy5wbGF5ZXIgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxheWVyID0gcGxheWVyX2lkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXllciA9IHNibG9hZHNlYXNvbnMucGxheWVyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXllciA9IHNibG9hZHNlYXNvbnMucGxheWVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnc3BvcnRzX2JlbmNoX2xvYWRfc2Vhc29ucycsXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiBzYmxvYWRzZWFzb25zLm5vbmNlLFxuICAgICAgICAgICAgICAgICAgICBzZWFzb246IHNlYXNvbixcbiAgICAgICAgICAgICAgICAgICAgdGVhbTogdGVhbSxcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyOiBwbGF5ZXJcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICQucG9zdCggc2Jsb2Fkc2Vhc29ucy51cmwsIGRhdGEsIGZ1bmN0aW9uICggcmVzICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHJlcy5zdWNjZXNzICkge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coIHJlcyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93LmFmdGVyKCByZXMuZGF0YSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCAnLm5ldy1zdGF0cy1yb3cnICkuaGlkZSggMCApLnNob3coIDEwMDAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKS5mYWlsKCBmdW5jdGlvbiAoIHhociwgdGV4dFN0YXR1cywgZSApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgdmFyIGNsaWNrZWQgPSBbIHNlYXNvbiwgdGVhbSBdO1xuICAgICAgICAgICAgICAgIG9wZW5TZWFzb25zLnB1c2goIGNsaWNrZWQgKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH0pO1xuICAgIFxufSk7XG4iXX0=